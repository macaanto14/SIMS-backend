{"timestamp":"2025-07-26 11:22:29.587","level":"ERROR","message":"Error fetching audit logs","service":"sims-backend","pid":29276,"error":"relation \"audit_logs\" does not exist","userId":"aaeb2db1-2ce5-437a-8263-a486827d8ad0","query":{"page":"1","limit":"20","operation_type":"CREATE"},"environment":"development","version":"1.0.0"}
{"timestamp":"2025-07-26 11:26:31.445","level":"ERROR","message":"Failed to log data access","service":"sims-backend","pid":75292,"error":"column \"accessed_table\" of relation \"data_access_logs\" does not exist","userId":"aaeb2db1-2ce5-437a-8263-a486827d8ad0","tableName":"audit_logs","accessType":"READ","environment":"development","version":"1.0.0"}
{"timestamp":"2025-07-26 11:30:20.839","level":"ERROR","message":"Failed to log data access","service":"sims-backend","pid":75292,"error":"column \"accessed_table\" of relation \"data_access_logs\" does not exist","userId":"aaeb2db1-2ce5-437a-8263-a486827d8ad0","tableName":"audit_logs","accessType":"READ","environment":"development","version":"1.0.0"}
{"timestamp":"2025-07-26 11:32:23.536","level":"ERROR","message":"Failed to log data access","service":"sims-backend","pid":25500,"error":"column \"accessed_table\" of relation \"data_access_logs\" does not exist","userId":"aaeb2db1-2ce5-437a-8263-a486827d8ad0","tableName":"audit_logs","accessType":"READ","environment":"development","version":"1.0.0"}
{"timestamp":"2025-07-26 11:38:22.982","level":"ERROR","message":"Failed to log data access","service":"sims-backend","pid":23012,"error":"column \"accessed_table\" of relation \"data_access_logs\" does not exist","userId":"aaeb2db1-2ce5-437a-8263-a486827d8ad0","tableName":"audit_logs","accessType":"READ","environment":"development","version":"1.0.0"}
{"timestamp":"2025-07-26 11:41:20.992","level":"ERROR","message":"Failed to log data access","service":"sims-backend","pid":23012,"error":"column \"accessed_table\" of relation \"data_access_logs\" does not exist","userId":"aaeb2db1-2ce5-437a-8263-a486827d8ad0","tableName":"audit_logs","accessType":"READ","environment":"development","version":"1.0.0"}
{"timestamp":"2025-07-26 11:41:49.292","level":"ERROR","message":"Error generating system activity dashboard","service":"sims-backend","pid":23012,"error":"bind message supplies 1 parameters, but prepared statement \"\" requires 0","userId":"aaeb2db1-2ce5-437a-8263-a486827d8ad0","query":{"days":"7"},"environment":"development","version":"1.0.0"}
{"timestamp":"2025-07-26 13:18:31.754","level":"ERROR","message":"Database operation failed","service":"sims-backend","pid":24244,"error":"column \"ip_address\" is of type inet but expression is of type text","duration":2544,"userId":"aaeb2db1-2ce5-437a-8263-a486827d8ad0","operation":"CREATE_SCHOOL","environment":"development","version":"1.0.0"}
{"timestamp":"2025-07-26 19:12:10.598","level":"ERROR","message":"Failed to initialize email service","service":"sims-backend","pid":18604,"error":"nodemailer.createTransporter is not a function","environment":"development","version":"1.0.0"}
{"timestamp":"2025-07-26 19:12:10.686","level":"ERROR","message":"Failed to send email","service":"sims-backend","pid":18604,"error":"Cannot read properties of null (reading 'sendMail')","to":"your_test@email.com","subject":"SIMS System Notification - Email System Test","template":"system-notification","environment":"development","version":"1.0.0"}
{"timestamp":"2025-07-26 19:12:10.692","level":"ERROR","message":"unhandledRejection: nodemailer.createTransporter is not a function\nTypeError: nodemailer.createTransporter is not a function\n    at EmailService.initialize (C:\\Dugsinet\\SIMS-backend\\src\\services\\emailService.js:35:37)\n    at new EmailService (C:\\Dugsinet\\SIMS-backend\\src\\services\\emailService.js:26:10)\n    at Object.<anonymous> (C:\\Dugsinet\\SIMS-backend\\src\\services\\emailService.js:515:22)\n    at Module._compile (node:internal/modules/cjs/loader:1554:14)\n    at Object..js (node:internal/modules/cjs/loader:1706:10)\n    at Module.load (node:internal/modules/cjs/loader:1289:32)\n    at Function._load (node:internal/modules/cjs/loader:1108:12)\n    at TracingChannel.traceSync (node:diagnostics_channel:322:14)\n    at wrapModuleLoad (node:internal/modules/cjs/loader:220:24)\n    at Module.require (node:internal/modules/cjs/loader:1311:12)","error":{},"stack":"TypeError: nodemailer.createTransporter is not a function\n    at EmailService.initialize (C:\\Dugsinet\\SIMS-backend\\src\\services\\emailService.js:35:37)\n    at new EmailService (C:\\Dugsinet\\SIMS-backend\\src\\services\\emailService.js:26:10)\n    at Object.<anonymous> (C:\\Dugsinet\\SIMS-backend\\src\\services\\emailService.js:515:22)\n    at Module._compile (node:internal/modules/cjs/loader:1554:14)\n    at Object..js (node:internal/modules/cjs/loader:1706:10)\n    at Module.load (node:internal/modules/cjs/loader:1289:32)\n    at Function._load (node:internal/modules/cjs/loader:1108:12)\n    at TracingChannel.traceSync (node:diagnostics_channel:322:14)\n    at wrapModuleLoad (node:internal/modules/cjs/loader:220:24)\n    at Module.require (node:internal/modules/cjs/loader:1311:12)","rejection":true,"date":"Sat Jul 26 2025 19:12:10 GMT+0300 (East Africa Time)","process":{"pid":18604,"uid":null,"gid":null,"cwd":"C:\\Dugsinet\\SIMS-backend","execPath":"C:\\Program Files\\nodejs\\node.exe","version":"v22.14.0","argv":["C:\\Program Files\\nodejs\\node.exe","C:\\Dugsinet\\SIMS-backend\\scripts\\test-email-system.js"],"memoryUsage":{"rss":57376768,"heapTotal":19177472,"heapUsed":13322056,"external":2274150,"arrayBuffers":16659}},"os":{"loadavg":[0,0,0],"uptime":694184.765},"trace":[{"column":37,"file":"C:\\Dugsinet\\SIMS-backend\\src\\services\\emailService.js","function":"EmailService.initialize","line":35,"method":"initialize","native":false},{"column":10,"file":"C:\\Dugsinet\\SIMS-backend\\src\\services\\emailService.js","function":"new EmailService","line":26,"method":null,"native":false},{"column":22,"file":"C:\\Dugsinet\\SIMS-backend\\src\\services\\emailService.js","function":null,"line":515,"method":null,"native":false},{"column":14,"file":"node:internal/modules/cjs/loader","function":"Module._compile","line":1554,"method":"_compile","native":false},{"column":10,"file":"node:internal/modules/cjs/loader","function":"Object..js","line":1706,"method":".js","native":false},{"column":32,"file":"node:internal/modules/cjs/loader","function":"Module.load","line":1289,"method":"load","native":false},{"column":12,"file":"node:internal/modules/cjs/loader","function":"Function._load","line":1108,"method":"_load","native":false},{"column":14,"file":"node:diagnostics_channel","function":"TracingChannel.traceSync","line":322,"method":"traceSync","native":false},{"column":24,"file":"node:internal/modules/cjs/loader","function":"wrapModuleLoad","line":220,"method":null,"native":false},{"column":12,"file":"node:internal/modules/cjs/loader","function":"Module.require","line":1311,"method":"require","native":false}],"service":"sims-backend","pid":18604,"environment":"development","version":"1.0.0"}
{"timestamp":"2025-07-26 19:19:59.144","level":"ERROR","message":"Failed to initialize email service","service":"sims-backend","pid":65036,"error":"nodemailer.createTransporter is not a function","environment":"development","version":"1.0.0"}
{"timestamp":"2025-07-26 19:26:59.200","level":"ERROR","message":"Failed to initialize email service","service":"sims-backend","pid":21960,"error":"connect ETIMEDOUT 213.55.96.132:25","environment":"development","version":"1.0.0"}
{"timestamp":"2025-07-26 19:28:05.288","level":"ERROR","message":"Failed to initialize email service","service":"sims-backend","pid":5428,"error":"queryA EBADNAME 213.55.96.132:25","environment":"development","version":"1.0.0"}
{"timestamp":"2025-07-26 19:28:05.293","level":"ERROR","message":"unhandledRejection: queryA EBADNAME 213.55.96.132:25\nError: queryA EBADNAME 213.55.96.132:25\n    at QueryReqWrap.onresolve [as oncomplete] (node:internal/dns/callback_resolver:45:19)","error":{"code":"EDNS","syscall":"queryA","hostname":"213.55.96.132:25","command":"CONN"},"stack":"Error: queryA EBADNAME 213.55.96.132:25\n    at QueryReqWrap.onresolve [as oncomplete] (node:internal/dns/callback_resolver:45:19)","rejection":true,"date":"Sat Jul 26 2025 19:28:05 GMT+0300 (East Africa Time)","process":{"pid":5428,"uid":null,"gid":null,"cwd":"C:\\Dugsinet\\SIMS-backend","execPath":"C:\\Program Files\\nodejs\\node.exe","version":"v22.14.0","argv":["C:\\Program Files\\nodejs\\node.exe","C:\\Dugsinet\\SIMS-backend\\scripts\\test-email-system.js"],"memoryUsage":{"rss":57720832,"heapTotal":20226048,"heapUsed":11458480,"external":2290003,"arrayBuffers":16675}},"os":{"loadavg":[0,0,0],"uptime":695139.359},"trace":[{"column":19,"file":"node:internal/dns/callback_resolver","function":"QueryReqWrap.onresolve [as oncomplete]","line":45,"method":"onresolve [as oncomplete]","native":false}],"service":"sims-backend","pid":5428,"environment":"development","version":"1.0.0"}
{"timestamp":"2025-07-26 19:28:05.296","level":"ERROR","message":"Failed to send email","service":"sims-backend","pid":5428,"error":"queryA EBADNAME 213.55.96.132:25","to":"haaji.dheere@gmail.com","subject":"SIMS System Notification - Email System Test","template":"system-notification","environment":"development","version":"1.0.0"}
